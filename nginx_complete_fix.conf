# å®Œæ•´çš„Nginxé…ç½®ä¿®å¤
# åœ¨ç°æœ‰çš„ location /api/ å—ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼š

location /api/ {
    proxy_pass http://pkb_test_backend;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # ğŸ”§ æ–°å¢ï¼šä¿®å¤é‡å®šå‘URLï¼Œç¡®ä¿HTTPS
    proxy_redirect http://pkb-test.kmchat.cloud/ https://pkb-test.kmchat.cloud/;
    proxy_redirect http://$host/ https://$host/;
    
    # ğŸ”§ æ–°å¢ï¼šé¢å¤–çš„HTTPSæ ‡è¯†å¤´
    proxy_set_header X-Forwarded-Ssl on;
    proxy_set_header X-Url-Scheme $scheme;
    
    # ğŸ”§ æ–°å¢ï¼šé€šç”¨é‡å®šå‘ä¿®å¤ï¼ˆå¯é€‰ï¼Œæ›´å¼ºå¤§ï¼‰
    # proxy_redirect ~^http://([^/]+)(.*)$ https://$1$2;
}
