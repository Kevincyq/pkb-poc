# 搜索覆盖层功能说明

## 🔍 功能概述

在知识库首页右上角的放大镜图标，点击后会弹出一个搜索覆盖层，提供快速搜索知识库内容的功能。

## ✨ 功能特性

### 1. 交互体验
- **点击触发**: 点击首页右上角的放大镜图标
- **覆盖层显示**: 弹出搜索覆盖层，覆盖部分页面
- **自动聚焦**: 搜索输入框自动获得焦点
- **外部点击关闭**: 点击搜索框外部区域自动关闭
- **ESC键关闭**: 按ESC键快速关闭搜索层

### 2. 搜索功能
- **混合搜索**: 结合关键词搜索和语义搜索
- **实时搜索**: 输入内容即时搜索（防抖处理）
- **回车搜索**: 支持回车键触发搜索
- **全库搜索**: 搜索知识库内所有内容

### 3. 结果展示
- **下拉列表**: 搜索结果以列表形式展示
- **关键词高亮**: 匹配的关键词用黄色背景高亮显示
- **文件类型图标**: 根据文件类型显示对应图标
- **分类标签**: 显示内容的分类信息和置信度
- **内容摘要**: 显示匹配内容的前150个字符
- **点击跳转**: 点击结果项可跳转到对应内容（待实现）

### 4. 状态反馈
- **加载状态**: 搜索时显示加载动画
- **空状态**: 无结果时显示友好提示
- **错误处理**: 搜索失败时的错误提示

## 🛠️ 技术实现

### 组件结构
```
SearchOverlay/
├── index.tsx          # 主组件
└── SearchOverlay.css  # 样式文件
```

### 核心功能
1. **搜索API调用**: 使用 `/api/search` 接口
2. **关键词高亮**: 使用正则表达式匹配和替换
3. **事件处理**: 外部点击、ESC键、回车键
4. **状态管理**: 搜索状态、结果状态、加载状态

### 样式特性
- **响应式设计**: 适配桌面和移动端
- **动画效果**: 弹出动画和过渡效果
- **毛玻璃背景**: backdrop-filter 模糊效果
- **自定义滚动条**: 美化的滚动条样式

## 📱 使用方法

1. **打开搜索**: 点击首页右上角的放大镜图标
2. **输入关键词**: 在搜索框中输入要搜索的内容
3. **查看结果**: 搜索结果会实时显示在下方
4. **选择结果**: 点击任意结果项查看详情
5. **关闭搜索**: 点击外部区域或按ESC键关闭

## 🎯 后续优化

### 待实现功能
- [ ] 搜索结果点击跳转到内容详情
- [ ] 搜索历史记录
- [ ] 搜索建议/自动完成
- [ ] 高级搜索过滤器
- [ ] 搜索结果分页

### 性能优化
- [ ] 搜索防抖优化
- [ ] 结果缓存机制
- [ ] 虚拟滚动（大量结果时）

## 🔧 开发说明

### 依赖组件
- Ant Design: Input, List, Typography, Spin, Empty, Tag
- React Hooks: useState, useRef, useEffect
- API服务: api.ts

### 关键配置
- 搜索类型: hybrid（混合搜索）
- 结果数量: 10条
- 摘要长度: 150字符
- 高亮样式: 黄色背景 + 橙色文字

### 调试信息
组件包含详细的console.log输出，便于开发调试：
- 搜索查询参数
- API响应数据
- 搜索结果数据
- 错误信息
